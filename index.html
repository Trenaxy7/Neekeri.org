<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatiasHub</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="header">
    <div class="logo">
        <img src="https://i.ibb.co/wZ78FCBL/Matias-Hub.png" alt="Logo" height="50">
    </div>
   
    <nav class="nav">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Categories</a></li>
            <li><a href="#">Trending</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </nav>
    <div class="search-bar">
        <input type="text" placeholder="Search videos...">
        <button>Search</button>
    </div>
</header>

<!-- Upload Button (top) -->
<div class="upload-section">
    <button class="upload-btn" onclick="openUploadModal()">Upload Video</button>
</div>

<main>
    <section class="about">
        <h2>Featured Videos</h2>
        <p>Browse the latest uploads.</p>
    </section>

    <!-- Video Grid (Featured) -->
    <section class="video-grid">
        <div class="video-card" data-embed="https://www.pornhub.com/embed/684340c846978">
            <img src="https://i.ibb.co/gMCJtsLq/Nimet-n-malli.png/320x180" alt="Video Thumbnail">
            <h3>Nooa Jussila niin läski ei yletä munaan</h3>
            <p>Views: 13.4K | Likes: 2K | Creator: NooaNussila67 | Length: 1:58</p>
            <div class="tags">
                #nooajussila #läski #homo
            </div>
        </div>
        <div class="video-card" data-embed="https://www.pornhub.com/embed/69178c2f22ccf">
            <img src="https://i.ibb.co/9kjSKWBs/matiascrop.jpg/320x180" alt="Video Thumbnail">
            <h3>matias polttaa ja ratsastaa nooa jussilan dildoa</h3>
            <p>Views: 12M | Likes: 459K | Creator: MatiasTHE_ChildPredator | Length: 10:36</p>
            <div class="tags">
                #nooajussila #matias #raiskaus
            </div>
        </div>
       
        <div class="video-card" data-embed="https://www.pornhub.com/embed/ph634dd7ee8daef">
            <img src="https://i.ibb.co/0VWLVGXk/01t0a1py9hrmr0cw68stq8haqw-result-0.png/320x180" alt="Video Thumbnail">
            <h3>ali femboy ottaa fanin munaa onlyfanssissa</h3>
            <p>Views: 6K | Likes: 865 | Creator: AliMohammedGazaRUbaye | Length: 1:50</p>
            <div class="tags">
                #femboy #alrupaualimohmedgaza #neekeri
            </div>
        </div>
        <div class="video-card" data-embed="https://www.pornhub.com/embed/675974d08a0bf">
            <img src="https://i.ibb.co/wrJF5kVw/pcs2pxx6j1rmw0cw68tb6frj8r-result-0.png/320x180" alt="Video Thumbnail">
            <h3>muslimi sikiö ottaa alin kyrpää</h3>
            <p>Views: 89K | Likes: 16K | Creator: AliMohammedGazaRUbaye | Length: 19:41</p>
            <div class="tags">
                #cp #scat #sikiö
            </div>
        </div>
    </section>

    <!-- Recent Uploads -->
    <section class="recent-section">
        <h2>Recent Uploads</h2>
        <div id="recent-videos" class="video-grid"></div>
    </section>

    <!-- Video Player -->
    <section class="video-player">
        <h2>Watch Video</h2>
        <iframe
          id="videoPlayer"
          width="100%"
          height="500"
          frameborder="0"
          allow="autoplay; fullscreen; picture-in-picture"
          allowfullscreen>
        </iframe>
    </section>

    <h1>© 2026 Google LLC. Sivuston on tehnyt Google itse.</h1>
</main>

<!-- Upload Modal -->
<div id="uploadModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeUploadModal()">&times;</span>
        <h2>Upload Your Video</h2>
        <input type="text" id="videoTitle" placeholder="Video title">
        <input type="text" id="videoAuthor" placeholder="Author name">
        <input type="file" id="file" accept="video/*" multiple>
        <button onclick="upload()">Upload Now</button>
        <p id="uploadStatus"></p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
/* ---------- HARD-CODED CARDS ---------- */
const player = document.getElementById("videoPlayer")
document.querySelectorAll(".video-card").forEach(card => {
  card.addEventListener("click", () => {
    player.src = card.dataset.embed
    player.scrollIntoView({ behavior: "smooth" })
  })
})

/* ---------- SUPABASE SETUP ---------- */
const supabaseUrl = "https://mpbfujjgxpobsfpqurlc.supabase.co"
const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wYmZ1ampneHBvYnNmcHF1cmxjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0NzE1ODEsImV4cCI6MjA4NjA0NzU4MX0.l3TeRxam4ZlI2eOCeeRv0JkE_3Q_PZwzJZ1W2Hm6WWo"
const supabaseClient = supabase.createClient(supabaseUrl, supabaseAnonKey)

/* ---------- UPLOAD MODAL ---------- */
function openUploadModal() {
  document.getElementById("uploadModal").style.display = "block";
  document.getElementById("uploadStatus").textContent = "";
}
function closeUploadModal() {
  document.getElementById("uploadModal").style.display = "none";
}

/* ---------- UPLOAD FUNCTION ---------- */
async function upload() {
  const file = document.getElementById("file").files[0]
  const title = document.getElementById("videoTitle").value.trim()
  const author = document.getElementById("videoAuthor").value.trim()
  const status = document.getElementById("uploadStatus")

  if (!file || !title || !author) {
    status.textContent = "Title, author, and video required"
    return
  }

  const safeName = file.name.replace(/[^\w.-]/g, "_")
  const path = `${Date.now()}_${safeName}`

  const { error } = await supabaseClient.storage
    .from("videos")
    .upload(path, file, {
      metadata: {
        title: title,
        author: author
      }
    })

  if (error) {
    status.textContent = error.message
    return
  }

  status.textContent = "Uploaded successfully!"
  closeUploadModal()
  loadRecentVideos()
}


/* ---------- LOAD RECENT VIDEOS ---------- */
async function loadRecentVideos() {
  const { data, error } = await supabaseClient
    .storage
    .from("videos")
    .list("", { limit: 50, sortBy: { column: "created_at", order: "desc" } })

  if (error) {
    console.error(error)
    return
  }

  const container = document.getElementById("recent-videos")
  container.innerHTML = ""

  if (data.length === 0) {
    container.innerHTML = "<p>No uploads yet.</p>"
    return
  }

  data.forEach(file => {
    const url =
      `${supabaseUrl}/storage/v1/object/public/videos/${file.name}`

    const title = file.metadata?.title || "Untitled"
    const author = file.metadata?.author || "Anonymous"

    const card = document.createElement("div")
    card.className = "video-card"

    card.innerHTML = `
      <video controls width="100%" style="border-radius:10px;">
        <source src="${url}" type="video/mp4">
      </video>
      <h3>${title}</h3>
      <p>By ${author}</p>
    `

    container.appendChild(card)
  })
}


loadRecentVideos()
</script>
</body>
</html>




